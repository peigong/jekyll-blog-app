(function(){define(["jquery","EventEmitter","providers/data","providers/template","text!templates/nav.tmpl.html"],function(e,t,n,r,i){var s,o;return o=new t,s=function(){function t(){var t;this.loaded=!1,this.el=e("#nav"),this.categories||(t=this,n.getCategories().then(this.load.bind(this)).fail(function(e){throw e}))}return t.prototype.load=function(t){var n;return n=this,this.categories=t,this.navHTML=r.render(this.categories,"tmpl-nav",i),this.el.html(this.navHTML),e("#nav ul.master a").click(function(){return n.show(e(this))}),this.loaded=!0,o.emit("loaded")},t.prototype.show=function(t){var n;return n=t.attr("data-id"),e("#nav div.slave").hide(),e("#nav div.slave[data-master="+n+"]").show()},t.prototype.setCurrentNav=function(t,n){var r,i;return i=this,r=function(){var n;return n=e("#nav ul.master a[data-id="+t+"]"),i.show(n)},this.loaded?r():o.on("loaded",r)},t}(),new s})}).call(this);